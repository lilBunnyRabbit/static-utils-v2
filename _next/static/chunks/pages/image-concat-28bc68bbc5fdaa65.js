(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{7547:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/image-concat",function(){return a(9779)}])},559:function(e,t,a){"use strict";a.d(t,{v:function(){return r}});let i=e=>!!e&&"image"===e.type.split("/")[0];async function n(e){if(!i(e))throw Error("File not image.");return await new Promise((t,a)=>{let i=new Image;i.onload=()=>t(i),i.onerror=a,i.src=URL.createObjectURL(e)})}class r{static async fromFile(e){let t=await n(e);return new r(e,t)}static async fromList(e){if(!e)return[];let t=(FileList,Array.from(e));return await Promise.all(t.map(async e=>{let t=null;if(e instanceof File)t=e;else{if(!e||"file"!==e.kind)return;t=e.getAsFile()}return t?await r.fromFile(t).catch(e=>console.error(e)):null}).filter(Boolean))}static async fromClipboardEvent(e){var t;return await r.fromList(null===(t=e.clipboardData)||void 0===t?void 0:t.items)}static async fromChangeEvent(e){return await r.fromList(e.target.files)}static fromUpload(e){return async t=>r.fromChangeEvent(t).then(e).catch(e=>console.error(e))}constructor(e,t){this.file=e,this.image=t}}},8766:function(e,t,a){"use strict";a.d(t,{Y:function(){return s}});var i=a(5893);let n=e=>t=>{let a=t.target;if("max"in a&&void 0!==a.max){let e="string"==typeof a.max?Number.parseFloat(a.max):a.max;a.valueAsNumber>e&&(t.target.value=String(e))}if("min"in a&&void 0!==a.min){let e="string"==typeof a.min?Number.parseFloat(a.min):a.min;a.valueAsNumber<e&&(t.target.value=String(e))}return e&&e(t)};var r=a(7294);let s=r.forwardRef((e,t)=>{let{label:a,state:r,onInput:s,...l}=e;return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[a&&(0,i.jsx)("label",{children:a}),(0,i.jsx)("input",{type:"number",ref:t,...r&&{value:void 0===r[0]||isNaN(r[0])?"":r[0],onChange:e=>r[1](isNaN(e.target.valueAsNumber)?void 0:e.target.valueAsNumber)},onInput:n(s),...l})]})});s.displayName="NumberInput"},8465:function(e,t,a){"use strict";a.d(t,{O:function(){return r}});var i=a(559),n=a(7294);function r(e){n.useEffect(()=>{let t=!0,a=async a=>{t&&(t=!1,await i.v.fromClipboardEvent(a).then(e).catch(e=>{console.error(e)}),t=!0)};return document.addEventListener("paste",a),()=>{document.removeEventListener("paste",a)}},[e])}},3005:function(e,t,a){"use strict";a.d(t,{C:function(){return n}});var i=a(5893);a(7294);let n=e=>{let{children:t,id:a,className:n}=e;return(0,i.jsxs)("div",{id:a,className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}("relative grid grid-cols-[256px,1fr] h-screen w-screen overflow-hidden",n),children:[(0,i.jsx)("div",{className:"relative p-4 bg-zinc-700 overflow-hidden",children:t[0]}),(0,i.jsx)("div",{className:"relative p-4 bg-zinc-900 overflow-hidden",children:t[1]})]})}},9779:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var i=a(5893),n=a(559),r=a(8766),s=a(8465),l=a(3005);let c=e=>Math.round(255*(e/100)).toString(16).padStart(2,"0"),h={gap:0,align:"start",background:"#ffffff",alpha:0,fit:!1,direction:"column"};var o=a(7294);let u=new class{bind(e){return this.canvas=e,this.ctx=e.getContext("2d",{willReadFrequently:!0}),this}render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;if(this.canvas&&this.ctx){if(this.updateCanvasSize(e,t),this.clearCanvas(t),t.fit){let a=this.updateImagesToFit(e,t);this.clearCanvas(t),e.reduce((e,i,n)=>{let{image:r}=i;return"column"===t.direction?(this.ctx.drawImage(r,0,e,this.canvas.width,a[n].height),e+a[n].height+t.gap):(this.ctx.drawImage(r,e,0,a[n].width,this.canvas.height),e+a[n].width+t.gap)},0)}else e.reduce((e,a,i)=>{let{image:n}=a;if("column"===t.direction){let a=0;return"center"===t.align?a=this.canvas.width/2-n.width/2:"end"===t.align&&(a=this.canvas.width-n.width),this.ctx.drawImage(n,a,e),e+n.height+t.gap}{let a=0;return"center"===t.align?a=this.canvas.height/2-n.height/2:"end"===t.align&&(a=this.canvas.height-n.height),this.ctx.drawImage(n,e,a),e+n.width+t.gap}},0)}}clearCanvas(e){if(console.log("clearCanvas"),e.alpha>0)return console.log("clearCanvas",e.alpha,"".concat(e.background).concat(c(e.alpha))),this.ctx.fillStyle="".concat(e.background).concat(c(e.alpha)),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}updateCanvasSize(e,t){let a={width:0,height:0};if("column"===t.direction){let i=0,n=Math.max(0,e.length-1)*t.gap;e.forEach(e=>{let{image:t}=e;t.width>i&&(i=t.width),n+=t.height}),a={width:i,height:n}}else{let i=Math.max(0,e.length-1)*t.gap,n=0;e.forEach(e=>{let{image:t}=e;t.height>n&&(n=t.height),i+=t.width}),a={width:i,height:n}}this.canvas.width=a.width,this.canvas.height=a.height}updateImagesToFit(e,t){let a=[];if("column"===t.direction){let i=Math.max(0,e.length-1)*t.gap;a=e.map(e=>{let{image:t}=e,a=this.canvas.width*(t.height/t.width);return i+=a,{width:this.canvas.width,height:a}}),this.canvas.height=i}else{let i=Math.max(0,e.length-1)*t.gap;a=e.map(e=>{let{image:t}=e,a=this.canvas.height*(t.width/t.height);return i+=a,{width:a,height:this.canvas.height}}),this.canvas.width=i}return a}constructor(){this.canvas=null,this.ctx=null}};function d(){let[e,t]=o.useState([]),[a,c]=o.useState(0),[h,d]=o.useState(0),[f,g]=o.useState("start"),[v,m]=o.useState("#ff0000"),[p,x]=o.useState(!1),[w,b]=o.useState(!0),[j,N]=o.useState(50),[y,C]=o.useState(),k=o.useRef(null),E=o.useMemo(()=>({gap:a||0,align:f,background:v,alpha:h||0,fit:p,direction:w?"column":"row"}),[a,h,f,v,p,w]);return(0,s.O)(e=>t(t=>[...t,...e])),o.useEffect(()=>{u.bind(k.current)},[]),o.useEffect(()=>{if(!e)return;let t=u.render(e,E);C(t)},[e,E]),(0,i.jsxs)(l.C,{id:"image-concat",children:[(0,i.jsxs)("div",{className:"relative w-full h-full flex flex-col justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)(r.Y,{className:"w-full text-black pl-2",label:"Gap",min:0,max:100,state:[a,c]}),(0,i.jsx)(r.Y,{className:"w-full text-black pl-2",label:"Alpha",min:0,max:100,state:[h,d]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Align"}),(0,i.jsxs)("select",{className:"text-black",value:f,onChange:e=>g(e.target.value),children:[(0,i.jsx)("option",{value:"start",children:"Start"}),(0,i.jsx)("option",{value:"center",children:"Center"}),(0,i.jsx)("option",{value:"end",children:"End"})]})]}),(0,i.jsx)("input",{type:"color",value:v,onChange:e=>m(e.target.value)}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"checkbox",checked:p,onChange:e=>x(e.target.checked)}),(0,i.jsx)("label",{children:"Fit"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"checkbox",checked:w,onChange:e=>b(e.target.checked)}),(0,i.jsx)("label",{children:"Column?"})]}),(0,i.jsx)(r.Y,{className:"w-full text-black pl-2",label:"Zoom",min:0,max:100,state:[j,N]})]}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:n.v.fromUpload(e=>t(t=>[...t,...e]))})]}),(0,i.jsx)("div",{className:"canvas-display","data-direction":E.direction,children:(0,i.jsx)("div",{style:{["column"===E.direction?"maxWidth":"maxHeight"]:"".concat(j,"%")},children:(0,i.jsx)("canvas",{ref:k})})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7547)}),_N_E=e.O()}]);